Виртуальные серверы используют виртуальные сети для связи друг с другом.
Виртуальные машины и базы данных в одной облачной сети видят друг друга, а в разных сетях - нет.
Для соединения нескольких виртуальных машин нужно создать облачную сеть.
Можно выбрать диапазон IP-адресов для каждой подсети.
Допустимая длина префикса варьируется от /16 до /28.
Внутренние IP-адреса не меняются в течение всего времени существования облачного ресурса.
Можно выдать виртуальной машине или базе данных публичный IP-адрес для обмена данными с интернетом и другими облачными сетями.

Чтобы ВМ полноценно заработала, для неё нужно организовать доступ в интернет. Есть три способа:
* Назначить ВМ публичный IP-адрес. Для этого выберите автоматический способ назначения IP-адреса, когда создаёте ВМ, или привяжите его к уже созданной.
* Использовать NAT-шлюз, который позволяет дать ВМ доступ в интернет без назначения ей публичного IP-адреса. Самому шлюзу адрес выделяется из отдельного диапазона публичных IP-адресов.
* Использовать NAT-инстанс — отдельную ВМ со статическим публичным IP-адресом и настроенными правилами маршрутизации трафика.

С точки зрения безопасности лучше выбирать второй или третий способ. В этом примере для упрощения присвойте ВМ публичный IP-адрес — в поле Публичный адрес выберите опцию Автоматически.

Статическая маршрутизация позволяет направлять трафик из подсети на заданные диапазоны IP-адресов через ВМ, указанные в качестве шлюза.
Таблицы маршрутизации содержат статические маршруты, состоящие из префикса целевой подсети и внутреннего IP-адреса шлюза.
Таблица маршрутизации привязывается к подсети и не может содержать повторяющихся префиксов.
Префикс 0.0.0.0/0 в маршруте означает, что весь трафик будет направлен через указанный для этого префикса шлюз.
В Yandex Cloud поддерживаются только префиксы назначения вне виртуальной сети.
При создании маршрута в качестве шлюза можно указать свободный внутренний IP-адрес.
Статические маршруты используются для построения сетевых маршрутов и отказоустойчивых схем с маршрутами в нескольких зонах доступности.
Изменение маршрутов трафика в интернет может привести к потере доступа к публичным IP-адресам ВМ из подсетей с привязанными таблицами маршрутизации.

Статическая маршрутизация позволяет направлять трафик из подсети на заданные диапазоны IP-адресов через ВМ, указанные в качестве шлюза.
Таблицы маршрутизации содержат статические маршруты, состоящие из префикса целевой подсети и внутреннего IP-адреса шлюза.
Таблица маршрутизации привязывается к подсети и не может содержать повторяющихся префиксов.
Префикс 0.0.0.0/0 в маршруте означает, что весь трафик будет направлен через указанный для этого префикса шлюз.
В Yandex Cloud поддерживаются только префиксы назначения вне виртуальной сети.
При создании маршрута в качестве шлюза можно указать свободный внутренний IP-адрес.
Статические маршруты используются для построения сетевых маршрутов и отказоустойчивых схем с маршрутами в нескольких зонах доступности.
Изменение маршрутов трафика в интернет может привести к потере доступа к публичным IP-адресам ВМ из подсетей с привязанными таблицами маршрутизации.

Группы безопасности выполняют функцию межсетевого экрана и контролируют входящий и исходящий трафик ВМ.
В консоли управления инструмент находится в разделе Virtual Private Cloud.
Если в облаке нет групп безопасности, нужно перейти по ссылке [https://console.cloud.yandex.ru/link/vpc/security-groups](https://console.cloud.yandex.ru/link/vpc/security-groups).
Группа безопасности назначается сетевому интерфейсу ВМ и содержит правила получения и отправки трафика.
Правила определяют протоколы и IP-адреса для приема и отправки трафика.
Если на ВМ назначены несколько групп безопасности, учитываются правила из всех групп.
Если нет правил для исходящего трафика, ответный трафик будет поступать на ВМ, но не инициироваться.
