# Руководство по управлению данными в Yandex Cloud

## Введение

Для принятия обоснованных решений бизнесу требуется собирать, обрабатывать и анализировать данные. Облачные технологии
позволяют быстро получать доступ к данным и экономить деньги, время и силы. В Yandex Cloud используются сервисы для
работы с данными, такие как PostgreSQL, MySQL, MongoDB и другие. Виртуализация баз данных имеет ряд преимуществ, таких
как более высокая доступность данных, быстрое добавление ресурсов и экономия средств.

## Развертывание баз данных в Yandex Cloud

В Yandex Cloud можно развернуть базы данных двумя способами:

1. Поверх виртуальных машин
2. С помощью сервисов управляемых баз данных

Использование управляемых баз данных позволяет сосредоточиться на приложении и не отвлекаться на администрирование
серверов и ПО.

## Основные понятия

### Кластеры

Использование управляемой базы данных в Yandex Cloud начинается с создания кластера.

### Масштабируемость

Управляемые базы данных решают проблему с помощью масштабирования.

### Доступность и отказоустойчивость

Сервисы управляемых баз данных помогут улучшить доступность приложения или сайта.

### Кластеры высокой доступности

Кластер можно настроить так, что любой хост автоматически станет мастером.

### Отказоустойчивость

Кластеры отказоустойчивы, если имеют избыточные ресурсы и размещены в разных зонах доступности.

### Выбор системы

Зависит от приоритетов: высокодоступная или отказоустойчивая.

## Типы баз данных

### Реляционные базы данных

- **Определение**: Набор таблиц и связей между ними.
- **Язык запросов**: SQL.
- **Популярные СУБД в Yandex Cloud**: MySQL и PostgreSQL.
- **Особенности**: Реляционные базы данных не всегда являются лучшим инструментом.

### Нереляционные (NoSQL) базы данных

- **Преимущества**: Высокая доступность, скорость работы и масштабируемость.
- **Популярные NoSQL базы данных**:
    - **MongoDB**: Популярная NoSQL СУБД с открытым исходным кодом, работает с документами и хорошо сочетается с
      JavaScript.
    - **Redis**: Хранилище данных типа key-value, работает с Lua скриптами, обеспечивает высокую производительность, но
      имеет ограничения.
    - **ClickHouse**: Столбцовая СУБД, хранит данные в таблицах, имеет высокую скорость работы, но не поддерживает
      транзакции.
    - **Elasticsearch**: Нереляционное хранилище данных, хорошо масштабируется, но не обеспечивает транзакционную
      целостность.
    - **YDB**: Разработанная Яндексом распределенная СУБД, основана на реляционной модели, обеспечивает
      отказоустойчивость и масштабируемость.
    - **Apache Kafka**: Распределенная стриминговая платформа, обеспечивает надежность передачи данных между сервисами.

## Выбор базы данных

Универсальной базы данных не существует, выбор зависит от задачи. На выбор базы данных влияют особенности задачи и
предпочтения разработчика. Факторы для выбора базы данных: масштабируемость, структура данных, необходимость транзакций,
сложность аналитических запросов, работа под смешанной нагрузкой. Управляемые базы данных имеют преимущества перед
традиционными базами данных.

## Объектное хранилище

Объектное хранилище - облачная система хранения данных произвольного формата, подходящая для хранения видеозаписей,
изображений, архивов и резервных копий. Объектное хранилище обеспечивает доступность данных, их защиту от
несанкционированного доступа и масштабируемость. Идентификатор объекта - строка, используемая для идентификации объектов
в хранилище, а метаданные содержат дополнительные сведения. Объекты в хранилище группируются в бакеты, что позволяет
разделять данные разных проектов или пользователей. Объектные хранилища имеют некоторые особенности, такие как
взаимодействие с приложениями через HTTP API и невозможность редактирования объектов. В Yandex Cloud доступны три класса
хранилищ: стандартное, холодное и ледяное, с разными тарифами на хранение и обращение к данным. S3-совместимость
позволяет использовать популярные инструменты для работы с S3-протоколом, такие как S3cmd, AWS CLI, Cyberduck, WinSCP,
SDK для Python и Java. Объектное хранилище имеет преимущества, такие как масштабируемость, высокая производительность,
отказоустойчивость, метаданные и низкая стоимость хранения данных.


Управление доступом к рентгеновским снимкам в облаке важно для обеспечения врачебной тайны.
В Yandex Cloud используются три независимых механизма контроля доступа: сервис управления доступом (IAM), список управления доступом (ACL) и политика доступа (Bucket Policy).
IAM проверяет все операции в облаке и управляет доступом на основе ролей.
ACL позволяет разрешать операции чтения, записи, перезаписи и удаления объектов.
Политика доступа настраивает дополнительные условия действий с бакетами и объектами.
Механизмы контроля доступа применяются в порядке: проверка через IAM, политика доступа и ACL.
Подписанные ссылки предоставляют временный доступ к объектам в хранилище.
Выбор механизма контроля доступа зависит от ситуации и желаемого уровня безопасности.

## Метаданные объекта в хранилище

Метаданные объекта в хранилище представляют собой сведения о его свойствах. Метаданные делятся на пользовательские и системные.

### Системные метаданные
Системные метаданные устанавливаются сервисом.

### Пользовательские метаданные
Пользовательские метаданные добавляются и изменяются пользователем.

### Использование метаданных
Метаданные используются для сортировки, анализа и поиска объектов.

### Передача пользовательских метаданных
Пользовательские метаданные передаются в хранилище при загрузке объекта в HTTP-заголовках.

### Имена пользовательских метаданных
Имена пользовательских метаданных могут быть указаны в разных регистрах, но после загрузки в хранилище они становятся строчными.

### Добавление и изменение пользовательских метаданных
Пользовательские метаданные могут быть добавлены или изменены.
