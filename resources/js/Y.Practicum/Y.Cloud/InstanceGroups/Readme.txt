Группы виртуальных машин нужны для управления большим количеством ВМ вручную.
Настройка групп ВМ позволяет избежать программных сбоев и пиковых нагрузок.
Правильно настроенная система сама создает копии ВМ при росте нагрузки и удаляет их при снижении.
В случае сбоя ВМ, система перезапускает ее или создает заново.
Все ВМ в группе автоматически создаются по шаблону, который описывает их конфигурацию.
Создание, обновление и удаление ВМ в группах выполняется от имени сервисного аккаунта.
Сервисный аккаунт может использоваться для работы с другими API Yandex Cloud.

Создание группы виртуальных машин для автоматического восстановления ВМ.
Ввод имени, описания группы и создание сервисного аккаунта с ролью editor.
Выбор двух зон доступности для обеспечения доступности сервиса.
Создание шаблона виртуальной машины с описанием конфигурации и выбором образа Ubuntu.
Настройка загрузочного диска, сетевых настроек и доступа к ВМ.
Установка политики развертывания: добавлять выше целевого значения, уменьшать относительно целевого значения, одновременно создавать и одновременно удалять ВМ.
Выбор фиксированного типа масштабирования и количества ВМ (3).
Интеграция с Load Balancer: создание целевой группы выключена, проверка состояний не включена.
Создание группы виртуальных машин и тестирование включения и выключения всех машин сразу.

Приложения не работают идеально, и сервисы могут столкнуться с проблемами из-за программных сбоев.
Instance Groups проверяет состояние ВМ и приложений, чтобы предотвратить простои сервисов.
Политика автоматического восстановления зависит от настроек развертывания.
Если целевой размер группы превышен, Instance Groups создает новые ВМ вместо проблемных.
Если целевой размер группы уменьшен, сервис перезагружает проблемную ВМ.
Комбинируйте оба способа восстановления для более надежного результата.
Старые машины не удаляются, пока не созданы новые ВМ.
Автоматическое восстановление прерываемых ВМ начинается только при наличии достаточного количества вычислительных ресурсов.

Автоматическое масштабирование важно для работы веб-сервиса при пиковой посещаемости.
Настройка автоматического масштабирования группы ВМ позволяет системе отслеживать потребность в ВМ и экономить ресурсы.
Создание группы ВМ, выбор метрик для отслеживания и целевого значения метрики.
Период стабилизации, время на разогрев ВМ и промежуток измерения нагрузки влияют на регулирование количества ВМ в группе.
Возможность установки пользовательских метрик, таких как среднее время ответа сервиса, для автоматического масштабирования.

Создание автоматически масштабируемой группы виртуальных машин (ВМ) в консоли управления.
Создание сервисного аккаунта с ролью editor для управления ВМ в группе.
Выбор зоны доступности и создание шаблона ВМ с ОС Ubuntu 20.04 и SSD-диском 50 ГБ.
Настройка параметров масштабирования: зональное автомасштабирование, минимальное количество ВМ в зоне 2, максимальный размер группы 4, измерение загрузки 60 секунд, разогрев ВМ 3 минуты, стабилизация 5 минут, начальный размер группы 4.
Настройка метрик: тип CPU, целевой уровень загрузки 80%.
Создание ВМ и изменение состояний: создание, ожидание прогрева, работа.
Группа ВМ готова принимать рабочую нагрузку.

